# AI聊天大模型功能总结

## 项目概述

AI聊天大模型是一个基于神经网络的智能对话系统，具有用户友好的图形界面，支持自然语言对话和自定义训练。该项目使用TF-IDF向量化和随机森林分类器实现意图识别，并提供了完善的训练和聊天功能。

## 主要功能

### 1. 智能对话

- **多意图识别**：支持21种不同类型的对话意图，包括问候、再见、感谢、帮助、天气、时间等
- **自然语言理解**：使用中文分词和TF-IDF向量化处理用户输入
- **上下文对话**：保存对话历史，支持连贯的对话体验
- **个性化回复**：对每种意图提供多样化的回复选择

### 2. 用户界面

- **聊天界面**：美观的消息气泡设计，清晰区分用户和AI的消息
- **训练管理界面**：可视化的训练数据管理和模型训练控制
- **多标签页设计**：聊天和训练功能分离，界面清晰易用
- **实时反馈**：训练过程中提供进度和性能指标的实时反馈

### 3. 训练系统

- **数据管理**：支持查看、编辑、添加和删除训练数据
- **扩展数据集**：内置基础和扩展两套训练数据，扩展数据包含更多对话场景
- **数据增强**：支持通过简单变换扩充训练样本
- **参数配置**：可调整训练参数如轮数、学习率、批大小等
- **模型评估**：提供准确率、分类报告等评估指标

### 4. 工具脚本

- **快速启动**：提供单独的脚本启动聊天界面或训练界面
- **命令行交互**：支持在命令行环境中进行聊天测试
- **快速训练**：无需GUI界面即可训练模型
- **调试模式**：支持显示详细的意图预测信息

## 使用指南

### 安装依赖

```bash
pip install -r requirements.txt
```

### 启动方式

1. **完整应用**：
   ```bash
   python scripts/run_demo.py
   ```

2. **仅聊天界面**：
   ```bash
   python scripts/start_chat.py
   ```

3. **仅训练界面**：
   ```bash
   python scripts/start_training.py
   ```

4. **命令行聊天测试**：
   ```bash
   python scripts/test_chatbot.py
   # 添加--debug参数可查看详细预测信息
   python scripts/test_chatbot.py --debug
   ```

5. **快速训练模型**：
   ```bash
   # 使用扩展数据集训练（默认）
   python scripts/quick_train.py
   
   # 使用基础数据集训练
   python scripts/quick_train.py --basic
   
   # 自定义训练参数
   python scripts/quick_train.py --trees 200 --test-size 0.3
   ```

### 训练数据格式

训练数据使用JSON格式，结构如下：

```json
[
  {
    "tag": "意图标签",
    "patterns": ["用户可能说的话1", "用户可能说的话2", ...],
    "responses": ["AI可能的回复1", "AI可能的回复2", ...]
  },
  ...
]
```

## 技术实现

- **自然语言处理**：使用jieba进行中文分词，TF-IDF进行文本向量化
- **机器学习模型**：使用随机森林分类器进行意图分类
- **界面框架**：基于PyQt5构建图形用户界面
- **多线程处理**：训练过程在独立线程中运行，保持UI响应性

## 常见问题

1. **模型未加载错误**：
   - 确保已运行训练脚本 `python scripts/test_trainer.py` 或 `python scripts/quick_train.py`
   - 检查 `data/models` 目录下是否有 `chat_model.pth` 文件

2. **训练数据问题**：
   - 检查 `data/training` 目录下的 `intents.json` 和 `extended_intents.json` 文件
   - 确保JSON格式正确无误

3. **依赖包缺失**：
   - 确保已安装所有必要的依赖包 `pip install -r requirements.txt`

4. **字体警告**：
   - 程序运行时可能出现字体相关警告，不影响程序功能

## 后续扩展方向

1. **深度学习模型**：引入深度神经网络如LSTM、Transformer等
2. **多轮对话管理**：增强上下文理解和多轮对话能力
3. **情感分析**：添加对用户情感的识别功能
4. **知识图谱集成**：结合知识图谱提供更准确的回答
5. **语音接口**：集成语音识别和合成功能 