# AI聊天模型 - 训练数据指南

本文档提供关于AI聊天模型训练数据的详细说明，包括数据格式、现有数据集、数据扩展方法以及相关工具的使用指南。

## 目录

1. [数据格式说明](#数据格式说明)
2. [现有训练数据集](#现有训练数据集)
3. [数据扩展工具](#数据扩展工具)
4. [数据增强技术](#数据增强技术)
5. [数据质量指南](#数据质量指南)
6. [常见问题解答](#常见问题解答)

## 数据格式说明

AI聊天模型的训练数据采用JSON格式，结构如下：

```json
{
  "intents": [
    {
      "tag": "意图标签",
      "patterns": [
        "用户可能的输入1",
        "用户可能的输入2",
        "..."
      ],
      "responses": [
        "AI可能的回复1",
        "AI可能的回复2",
        "..."
      ]
    }
  ]
}
```

主要字段说明：
- `tag`: 意图的唯一标识符，用于分类用户输入的意图
- `patterns`: 用户可能的输入模式列表，用于训练模型识别
- `responses`: 对应此意图的可能响应列表，模型会从中随机选择

## 现有训练数据集

项目目前包含以下训练数据文件，位于 `data/training/` 目录下：

1. **基础数据集**
   - `extended_intents.json`: 基础意图集，包含常见对话如问候、告别等
   - `advanced_intents.json`: 进阶知识问答，覆盖多个领域知识

2. **专业领域数据集**
   - `domain_specific_intents.json`: 特定领域知识问答
   - `emotional_intents.json`: 情感化对话样本
   - `problem_solving_intents.json`: 问题解决对话样本

3. **新增专题数据集**
   - `contextual_intents.json`: 上下文理解和多轮对话样本
   - `ai_tech_intents.json`: AI和技术领域专业问答

4. **合成数据集**
   - `merged_intents.json`: 合并后的数据集
   - `augmented_intents.json`: 数据增强后的扩展数据集

## 数据扩展工具

项目提供了专门的数据扩展工具，用于合并和增强训练数据：

### 脚本路径
```
scripts/extend_training_data.py
```

### 主要功能
1. 合并多个训练数据文件
2. 应用数据增强技术生成更多样本
3. 提供数据集统计分析

### 使用方法

#### 合并所有训练数据文件

```bash
python scripts/extend_training_data.py --output merged_all.json
```

#### 合并指定的训练数据文件

```bash
python scripts/extend_training_data.py --files extended_intents.json ai_tech_intents.json --output merged_tech.json
```

#### 合并并应用数据增强

```bash
python scripts/extend_training_data.py --augment --factor 5 --output augmented_intents.json
```

### 参数说明

- `--files`: 要合并的文件列表，不指定则合并所有JSON文件
- `--output`: 输出文件名，默认为 `merged_enhanced_intents.json`
- `--augment`: 是否应用数据增强
- `--factor`: 数据增强因子，默认为3（每个原始样本生成3个变体）

## 数据增强技术

数据扩展工具应用了以下增强技术：

1. **同义词替换**：随机将句子中的词替换为同义词，增加表达多样性
   ```
   "什么是人工智能" → "啥是人工智能"/"什么样的人工智能"
   ```

2. **问句变换**：转换问句结构，保持语义不变
   ```
   "人工智能是什么" ↔ "什么是人工智能"
   ```

3. **去重处理**：合并数据集时自动去除重复样本

## 数据质量指南

创建高质量训练数据的建议：

1. **多样性**：每个意图至少提供10个不同表达方式的样本
2. **真实性**：模拟真实用户的语言习惯，包括口语化表达
3. **平衡性**：避免意图之间样本数量差异过大
4. **覆盖性**：确保覆盖领域内主要问题和变体
5. **响应质量**：提供信息准确、有帮助且语气自然的回复选项

## 常见问题解答

### Q: 如何添加新的意图类别？

A: 创建新的JSON文件或编辑现有文件，按照上述数据格式添加新的意图对象，然后使用数据扩展工具合并。

### Q: 建议的每个意图的样本数量是多少？

A: 建议每个意图至少有20个训练样本，可以通过数据增强工具扩充样本数量。

### Q: 数据增强会影响模型质量吗？

A: 适度的数据增强有助于提高模型泛化能力，但过度增强可能引入噪声。建议使用2-5的增强因子。

### Q: 如何处理多领域数据？

A: 可以创建多个领域特定的JSON文件，然后按需合并。例如，可以为技术问题、情感对话等创建单独的文件。

### Q: 模型训练需要多少数据？

A: 视复杂度而定，一个基础聊天模型通常需要至少500个训练样本，分布在20-30个意图类别中。对于复杂领域，可能需要更多数据。 